<%- model_class = Patient -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>

<%= search_form_for @q, url: doctor_patients_path(@doctor) do |f| %>
  <%= f.condition_fields do |c| %>
    <%= render "condition_fields", f: c%>
  <% end %>
  <p><%= link_to_add_fields "Add Conditions", f, :condition %>
  <div class="actions"><%= f.submit "Search" %></div>
<% end %>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:name) %></th>
      <th><%= model_class.human_attribute_name(:age) %></th>
      <th><%= model_class.human_attribute_name(:gender) %></th>
      <th><%= model_class.human_attribute_name(:birthday) %></th>
      <th><%= model_class.human_attribute_name(:surname) %></th>
      <th><%= model_class.human_attribute_name(:second_name) %></th>
      <th><%= model_class.human_attribute_name(:address) %></th>
      <th><%= model_class.human_attribute_name(:registration_address) %></th>
      <th><%= model_class.human_attribute_name(:phone) %></th>
      <th><%= model_class.human_attribute_name(:work_phone) %></th>
      <th><%= model_class.human_attribute_name(:disability) %></th>
      <th><%= model_class.human_attribute_name(:work_place) %></th>
      <th><%= model_class.human_attribute_name(:work_position) %></th>
      <th><%= model_class.human_attribute_name(:dependant) %></th>
      <th><%= model_class.human_attribute_name(:area) %></th>
      <th><%= model_class.human_attribute_name(:insurance_policy_series) %></th>
      <th><%= model_class.human_attribute_name(:insurance_policy_number) %></th>
      <th><%= model_class.human_attribute_name(:social_benefit_code) %></th>
      <th><%= model_class.human_attribute_name(:document_series) %></th>
      <th><%= model_class.human_attribute_name(:document_number) %></th>
      <th><%= model_class.human_attribute_name(:martial_status) %></th>
      <th><%= model_class.human_attribute_name(:education) %></th>
      <th><%= model_class.human_attribute_name(:employment) %></th>
      <th><%= model_class.human_attribute_name(:disability_time) %></th>
      <th><%= model_class.human_attribute_name(:disability_date) %></th>
      <th><%= model_class.human_attribute_name(:blood_type) %></th>
      <th><%= model_class.human_attribute_name(:Rh_factor) %></th>
      <th><%= model_class.human_attribute_name(:insurance_company) %></th>
      <th><%= model_class.human_attribute_name(:document_name) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @patients.each do |patient| %>
      <tr>
        <td><%= link_to patient.id, doctor_patient_path(@doctor, patient) %></td>
        <td><%= patient.name %></td>
        <td><%= patient.age %></td>
        <td><%= patient.gender %></td>
        <td><%= patient.birthday %></td>
        <td><%= patient.surname %></td>
        <td><%= patient.second_name %></td>
        <td><%= patient.address %></td>
        <td><%= patient.registration_address %></td>
        <td><%= patient.phone %></td>
        <td><%= patient.work_phone %></td>
        <td><%= patient.disability %></td>
        <td><%= patient.work_place %></td>
        <td><%= patient.work_position %></td>
        <td><%= patient.dependant %></td>
        <td><%= patient.area %></td>
        <td><%= patient.insurance_policy_series %></td>
        <td><%= patient.insurance_policy_number %></td>
        <td><%= patient.social_benefit_code %></td>
        <td><%= patient.document_series %></td>
        <td><%= patient.document_number %></td>
        <td><%= patient.martial_status %></td>
        <td><%= patient.education %></td>
        <td><%= patient.employment %></td>
        <td><%= patient.disability_time %></td>
        <td><%= patient.disability_date %></td>
        <td><%= patient.blood_type %></td>
        <td><%= patient.Rh_factor %></td>
        <td><%= patient.insurance_company %></td>
        <td><%= patient.document_name %></td>
        <td><%=l patient.created_at %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_doctor_patient_path(@doctor, patient), :class => 'btn btn-default btn-xs' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      doctor_patient_path(@doctor, patient),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-xs btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_doctor_patient_path(@doctor),
            :class => 'btn btn-primary' %>
